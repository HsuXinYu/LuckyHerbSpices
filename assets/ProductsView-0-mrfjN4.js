import{a as p}from"./sweetalert.min-cx6vSVxL.js";import{M as f}from"./modal-2DPi5Yck.js";import{c as u}from"./cartStore-lnVgmuPD.js";import{m,e as b,_ as g,o as c,c as r,a as t,t as d,f as D,v as M,g as h,r as k,F as _,h as $,b as C}from"./index-I6cWyZY8.js";const x={props:["productDetail"],data(){return{modal:"",qty:1}},computed:{...m(u,["isLoading"])},methods:{...b(u,["addToCart"]),openModal(){this.modal.show()},hideModal(){this.qty=1,this.modal.hide()}},mounted(){this.modal=new f(this.$refs.modal)}},w={id:"productModal",class:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},P={class:"modal-dialog modal-xl",role:"document"},L={class:"modal-content border-0"},q={class:"modal-header bg-dark text-white"},T={class:"modal-title",id:"exampleModalLabel"},V={class:"modal-body"},B={class:"row"},S={class:"col-sm-6"},U=["src"],F={class:"col-sm-6"},N={class:"badge bg-primary rounded-pill"},z={class:"h6"},A={class:"h5"},E={class:"input-group"},j=["disabled"];function G(s,e,o,v,l,n){return c(),r("div",w,[t("div",P,[t("div",L,[t("div",q,[t("h5",T,[t("span",null,d(o.productDetail.title),1)]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:e[0]||(e[0]=(...i)=>n.hideModal&&n.hideModal(...i))})]),t("div",V,[t("div",B,[t("div",S,[t("img",{class:"img-fluid",src:o.productDetail.imageUrl,alt:"主圖"},null,8,U)]),t("div",F,[t("span",N,d(o.productDetail.category),1),t("p",null,"商品描述："+d(o.productDetail.description),1),t("p",null,"商品內容："+d(o.productDetail.content),1),t("del",z,"原價 "+d(o.productDetail.origin_price)+" 元",1),t("div",A,"現在只要 "+d(o.productDetail.price)+" 元",1),t("div",null,[t("div",E,[D(t("input",{type:"number",class:"form-control",min:"1","onUpdate:modelValue":e[1]||(e[1]=i=>l.qty=i)},null,512),[[M,l.qty]]),t("button",{type:"button",class:"btn btn-primary",disabled:s.isLoading,onClick:e[2]||(e[2]=h(i=>s.addToCart(o.productDetail.id,l.qty),["prevent"]))}," 加入購物車 ",8,j)])])])])])])])],512)}const H=g(x,[["render",G]]),I={data(){return{pagination:{},products:[],productDetail:{}}},components:{ProductModal:H},computed:{...m(u,["isLoading"])},methods:{...b(u,["getCart","addToCart"]),getProduct(){const s=this.$loading.show();p.get("https://vue3-course-api.hexschool.io/v2/api/lucky_herb_spices/products").then(o=>{this.pagination=o.data.pagination,this.products=o.data.products,s.hide()}).catch(()=>{})},getProductDetail(s){const e=`https://vue3-course-api.hexschool.io/v2/api/lucky_herb_spices/product/${s}`;p.get(e).then(o=>{this.productDetail=o.data.product,this.$refs.modal.openModal()}).catch(()=>{})}},mounted(){this.getProduct()}},J={class:"table align-middle"},K=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),O={style:{width:"200px"}},Q=["src"],R={class:"h6"},W={class:"h5"},X={class:"btn-group btn-group-sm"},Y=["onClick"],Z=["disabled","onClick"];function tt(s,e,o,v,l,n){const i=k("ProductModal");return c(),r(_,null,[t("table",J,[K,t("tbody",null,[(c(!0),r(_,null,$(l.products,a=>(c(),r("tr",{key:a.id},[t("td",O,[t("img",{style:{height:"100px","background-size":"cover","background-position":"center"},src:a.imageUrl,alt:"主圖"},null,8,Q)]),t("td",null,d(a.title),1),t("td",null,[t("del",R,"原價 "+d(a.origin_price)+" 元",1),t("div",W,"現在只要 "+d(a.price)+" 元",1)]),t("td",null,[t("div",X,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:h(y=>n.getProductDetail(a.id),["prevent"])}," 查看更多 ",8,Y),t("button",{type:"button",class:"btn btn-outline-danger",disabled:s.isLoading,onClick:h(y=>s.addToCart(a.id),["prevent"])}," 加到購物車 ",8,Z)])])]))),128))])]),C(i,{ref:"modal",productDetail:l.productDetail},null,8,["productDetail"])],64)}const at=g(I,[["render",tt]]);export{at as default};
