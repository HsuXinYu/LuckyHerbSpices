import{a as h}from"./axios-G2rPRu76.js";import{M as y}from"./modal-2lUnOgc8.js";import{c as _}from"./cartStore-rWzGE7um.js";import{m,_ as b,o as r,c,a as t,t as s,e as f,v as D,f as u,r as M,F as p,g as $,b as x}from"./index-Z2iVc0QE.js";const k={props:["productDetail"],data(){return{modal:"",qty:1}},methods:{...m(_,["addToCart"]),openModal(){this.modal.show()},hideModal(){this.qty=1,this.modal.hide()}},mounted(){this.modal=new y(this.$refs.modal)}},C={id:"productModal",class:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},w={class:"modal-dialog modal-xl",role:"document"},P={class:"modal-content border-0"},B={class:"modal-header bg-dark text-white"},q={class:"modal-title",id:"exampleModalLabel"},T={class:"modal-body"},V={class:"row"},L={class:"col-sm-6"},U=["src"],F={class:"col-sm-6"},N={class:"badge bg-primary rounded-pill"},S={class:"h6"},z={class:"h5"},A={class:"input-group"};function E(l,e,o,g,d,n){return r(),c("div",C,[t("div",w,[t("div",P,[t("div",B,[t("h5",q,[t("span",null,s(o.productDetail.title),1)]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:e[0]||(e[0]=(...i)=>n.hideModal&&n.hideModal(...i))})]),t("div",T,[t("div",V,[t("div",L,[t("img",{class:"img-fluid",src:o.productDetail.imageUrl,alt:"主圖"},null,8,U)]),t("div",F,[t("span",N,s(o.productDetail.category),1),t("p",null,"商品描述："+s(o.productDetail.description),1),t("p",null,"商品內容："+s(o.productDetail.content),1),t("del",S,"原價 "+s(o.productDetail.origin_price)+" 元",1),t("div",z,"現在只要 "+s(o.productDetail.price)+" 元",1),t("div",null,[t("div",A,[f(t("input",{type:"number",class:"form-control",min:"1","onUpdate:modelValue":e[1]||(e[1]=i=>d.qty=i)},null,512),[[D,d.qty]]),t("button",{type:"button",class:"btn btn-primary",onBlur:e[2]||(e[2]=u(i=>l.addToCart(o.productDetail.id,d.qty),["prevent"]))}," 加入購物車 ",32)])])])])])])])],512)}const j=b(k,[["render",E]]),G={data(){return{pagination:{},products:[],productDetail:{}}},components:{ProductModal:j},methods:{...m(_,["getCart","addToCart"]),getProduct(){const l=this.$loading.show();h.get("https://vue3-course-api.hexschool.io/v2/api/lucky_herb_spices/products").then(o=>{this.pagination=o.data.pagination,this.products=o.data.products,l.hide()}).catch(()=>{})},getProductDetail(l){const e=`https://vue3-course-api.hexschool.io/v2/api/lucky_herb_spices/product/${l}`;h.get(e).then(o=>{this.productDetail=o.data.product,this.$refs.modal.openModal()}).catch(()=>{})}},mounted(){this.getProduct()}},H={class:"table align-middle"},I=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),J={style:{width:"200px"}},K=["src"],O={class:"h6"},Q={class:"h5"},R={class:"btn-group btn-group-sm"},W=["onClick"],X=["onBlur"];function Y(l,e,o,g,d,n){const i=M("ProductModal");return r(),c(p,null,[t("table",H,[I,t("tbody",null,[(r(!0),c(p,null,$(d.products,a=>(r(),c("tr",{key:a.id},[t("td",J,[t("img",{style:{height:"100px","background-size":"cover","background-position":"center"},src:a.imageUrl,alt:"主圖"},null,8,K)]),t("td",null,s(a.title),1),t("td",null,[t("del",O,"原價 "+s(a.origin_price)+" 元",1),t("div",Q,"現在只要 "+s(a.price)+" 元",1)]),t("td",null,[t("div",R,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:u(v=>n.getProductDetail(a.id),["prevent"])}," 查看更多 ",8,W),t("button",{type:"button",class:"btn btn-outline-danger",onBlur:u(v=>l.addToCart(a.id),["prevent"])}," 加到購物車 ",40,X)])])]))),128))])]),x(i,{ref:"modal",productDetail:d.productDetail},null,8,["productDetail"])],64)}const st=b(G,[["render",Y]]);export{st as default};
